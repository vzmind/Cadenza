<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf8" />
<title>Class: Cadenza::Loader</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (L)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Cadenza.html" title="Cadenza (module)">Cadenza</a></span></span>
     &raquo; 
    <span class="title">Loader</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Cadenza::Loader
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Cadenza::Loader</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb</dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="FilesystemLoader.html" title="Cadenza::FilesystemLoader (class)">FilesystemLoader</a></span></p>
</div>



  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_template-class_method" title="get_template (class method)">+ (Object) <strong>get_template</strong>(protocol, address) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Retrieves the parsed template for a given protocol and address.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inherited-class_method" title="inherited (class method)">+ (Object) <strong>inherited</strong>(subclass) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Keep track of the classes that subclass this one.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#loaded_templates-class_method" title="loaded_templates (class method)">+ (Object) <strong>loaded_templates</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a hash of [protocol, address] to the parsed templates that have
already been loaded.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parser-class_method" title="parser (class method)">+ (Object) <strong>parser</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the parser currently being used by the loader class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parser%3D-class_method" title="parser= (class method)">+ (Object) <strong>parser=</strong>(parser) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets the parser to be used by the loader class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#protocol_name-class_method" title="protocol_name (class method)">+ (Object) <strong>protocol_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the protocol name for the loader.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#protocols-class_method" title="protocols (class method)">+ (Object) <strong>protocols</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a hash of all protocol names to the class that implements them.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="get_template-class_method">
  
    + (<tt>Object</tt>) <strong>get_template</strong>(protocol, address) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Retrieves the parsed template for a given protocol and address. If the
template has not already been loaded before then it will retrieve the
template using the address, parse it and then cache it.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 39</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='get_template identifier id'>get_template</span><span class='lparen token'>(</span><span class='protocol identifier id'>protocol</span><span class='comma token'>,</span> <span class='address identifier id'>address</span><span class='rparen token'>)</span>
  <span class='klass identifier id'>klass</span> <span class='assign token'>=</span> <span class='protocols identifier id'>protocols</span><span class='dot token'>.</span><span class='fetch identifier id'>fetch</span><span class='lparen token'>(</span><span class='protocol identifier id'>protocol</span><span class='rparen token'>)</span>
  
  <span class='template identifier id'>template</span> <span class='assign token'>=</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='get_template identifier id'>get_template</span><span class='lparen token'>(</span><span class='address identifier id'>address</span><span class='rparen token'>)</span>
  
  <span class='unless unless kw'>unless</span> <span class='loaded_templates identifier id'>loaded_templates</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='protocol identifier id'>protocol</span><span class='comma token'>,</span> <span class='address identifier id'>address</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='loaded_templates identifier id'>loaded_templates</span><span class='dot token'>.</span><span class='store identifier id'>store</span><span class='lparen token'>(</span><span class='lbrack token'>[</span><span class='protocol identifier id'>protocol</span><span class='comma token'>,</span> <span class='address identifier id'>address</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='template identifier id'>template</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  
  <span class='return return kw'>return</span> <span class='template identifier id'>template</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inherited-class_method">
  
    + (<tt>Object</tt>) <strong>inherited</strong>(subclass) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Keep track of the classes that subclass this one
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 19</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='inherited identifier id'>inherited</span><span class='lparen token'>(</span><span class='subclass identifier id'>subclass</span><span class='rparen token'>)</span>
  <span class='lparen token'>(</span><span class='@@protocol_classes ivar id'>@@protocol_classes</span> <span class='opasgn op'>||=</span> <span class='Array constant id'>Array</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='push identifier id'>push</span><span class='lparen token'>(</span><span class='subclass identifier id'>subclass</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="loaded_templates-class_method">
  
    + (<tt>Object</tt>) <strong>loaded_templates</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a hash of [protocol, address] to the parsed templates that have
already been loaded. Note: to render templates you should not reference
this method as it provides no validation. Instead make use of get_template,
which will check to see if the loaded template is still valid.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 32</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='loaded_templates identifier id'>loaded_templates</span>
  <span class='@@loaded_templates ivar id'>@@loaded_templates</span> <span class='opasgn op'>||=</span> <span class='Hash constant id'>Hash</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parser-class_method">
  
    + (<tt>Object</tt>) <strong>parser</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the parser currently being used by the loader class
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 7</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='parser identifier id'>parser</span>
  <span class='@@parser ivar id'>@@parser</span> <span class='opasgn op'>||=</span> <span class='Parser constant id'>Parser</span><span class='dot token'>.</span><span class='new identifier id'>new</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parser=-class_method">
  
    + (<tt>Object</tt>) <strong>parser=</strong>(parser) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets the parser to be used by the loader class. Note this will not
recompile templates that have already been loaded. To force recompilation
you will have to clear the loaded_templates hash and reload the files
manually.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 14</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='parser identifier id'>parser</span><span class='assign token'>=</span><span class='lparen token'>(</span><span class='parser identifier id'>parser</span><span class='rparen token'>)</span>
  <span class='@@parser ivar id'>@@parser</span> <span class='assign token'>=</span> <span class='parser identifier id'>parser</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="protocol_name-class_method">
  
    + (<tt>Object</tt>) <strong>protocol_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the protocol name for the loader
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 52</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='protocol_name identifier id'>protocol_name</span>
  <span class='raise identifier id'>raise</span> <span class='string val'>'unimplemented protocol_name'</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="protocols-class_method">
  
    + (<tt>Object</tt>) <strong>protocols</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a hash of all protocol names to the class that implements them.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File '/home/will/rails-workspace/cadenza/lib/cadenza/loader.rb', line 24</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='protocols identifier id'>protocols</span>
  <span class='protocol_hash identifier id'>protocol_hash</span><span class='dot token'>.</span><span class='freeze identifier id'>freeze</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Jan 20 14:49:39 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.8.7).
</div>

  </body>
</html>